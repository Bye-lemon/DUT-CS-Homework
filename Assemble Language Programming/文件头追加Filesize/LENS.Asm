.MODEL TINY
.CODE
.STARTUP
	MOV  AL, 00H
	MOV  DX, OFFSET FNAME
	MOV  AH, 3DH
	INT  21H
	
	MOV  BX, AX
	MOV  AL, 02H
	MOV  DX, 00H
	MOV  CX, 00H
	MOV  AH, 42H
	INT  21H
	PUSH AX
	
	MOV  AL, 00H
	MOV  DX, 00H
	MOV  CX, 00H
	MOV  AH, 42H
	INT  21H
	
	POP  CX
	PUSH CX
	MOV  DX, OFFSET BUFFER
	MOV  AH, 3FH
	INT  21H
	
	MOV  AH, 3EH
	INT  21H
	
	MOV  AL, 01H
	MOV  DX, OFFSET FNAME
	MOV  AH, 3DH
	INT  21H
	
	MOV  BX, AX
	MOV  AL, 00H
	MOV  DX, 00H
	MOV  CX, 00H
	MOV  AH, 42H
	INT  21H
	
	MOV  DX, OFFSET HEADER
	MOV  CX, LEN
	MOV  AH, 40H
	INT  21H
	
	POP  AX
	PUSH AX
	MOV  CL, 10D
	DIV  CL
	MOV  DL, AH
	ADD  DL, 30H
	MOV  AH, DL
	ADD  AL, 30H
	MOV  CX, 0001H
	LEA  DI, LENS
	STOSW
	
	MOV  DX, OFFSET LENS
	MOV  CX, 02H
	MOV  AH, 40H
	INT  21H
	
	MOV  DX, OFFSET ENDER
	MOV  CX, LEN_E
	MOV  AH, 40H
	INT  21H
	
	MOV  DX, OFFSET BUFFER
	POP  CX
	MOV  AH, 40H
	INT  21H
	
	MOV  AH, 3EH
	INT  21H
.EXIT 0

FNAME    DB  'C:/myinfo.txt', 0H
HEADER   DB  'filesize:'
LEN      EQU $ - HEADER
ENDER    DB  0DH, 0AH
LEN_E    EQU $ - ENDER
BUFFER   DB  100, 100 DUP(0)
LENS     DB  2, 0
END